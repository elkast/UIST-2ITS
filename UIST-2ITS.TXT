Documentation ComplÃ¨te du SystÃ¨me UIST-2ITS
Table des MatiÃ¨res
1.	Architecture Globale
2.	Acteurs et PrivilÃ¨ges
3.	FonctionnalitÃ©s par Acteur
4.	Relations et ModÃ¨le de DonnÃ©es
5.	Diagrammes UML
________________________________________
1. Architecture Globale
1.1 Principes Architecturaux
Le systÃ¨me UIST-Planify adopte une architecture en couches basÃ©e sur le principe du moindre privilÃ¨ge et de la sÃ©paration des responsabilitÃ©s. L'architecture se compose de 4 couches hiÃ©rarchiques :
1.	â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
2.	â”‚         COUCHE 1 : GOUVERNANCE SYSTÃˆME                  â”‚
3.	â”‚              (Super Administrateur)                      â”‚
4.	â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
5.	                          â†“
6.	â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
7.	â”‚      COUCHE 2 : GOUVERNANCE PÃ‰DAGOGIQUE                 â”‚
8.	â”‚        (Directeur/Administrateur Principal)             â”‚
9.	â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
10.	                          â†“
11.	â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
12.	â”‚       COUCHE 3 : ADMINISTRATION OPÃ‰RATIONNELLE          â”‚
13.	â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
14.	â”‚    â”‚  Gestion 1   â”‚  Gestion 2   â”‚  Gestion 3   â”‚      â”‚
15.	â”‚    â”‚ (Logistique) â”‚ (ScolaritÃ©)  â”‚ (Suivi)      â”‚      â”‚
16.	â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
17.	â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
18.	                          â†“
19.	â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
20.	â”‚          COUCHE 4 : UTILISATEURS FINAUX                 â”‚
21.	â”‚        (Enseignants, Ã‰tudiants, Parents)                â”‚
22.	â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1.2 Stack Technique
â—	Backend : Flask (Python) avec architecture Blueprint
â—	Base de donnÃ©es : MySQL 8.0+
â—	SÃ©curitÃ© : Werkzeug pour hashage des mots de passe, sessions Flask
â—	GÃ©nÃ©ration de documents : ReportLab (PDF), OpenPyXL (Excel)
â—	Frontend : Templates Jinja2, Bootstrap 5
________________________________________
2. Acteurs et PrivilÃ¨ges
2.1 HiÃ©rarchie des RÃ´les
23.	SUPER_ADMIN (Niveau 5)
24.	    â†“
25.	DIRECTEUR (Niveau 4)
26.	    â†“
27.	GESTION_1, GESTION_2, GESTION_3 (Niveau 3)
28.	    â†“
29.	ENSEIGNANT (Niveau 2)
30.	    â†“
31.	ETUDIANT, PARENT (Niveau 1)

2.2 Matrice des PrivilÃ¨ges
PrivilÃ¨ge	Super Admin	Directeur	Gestion 1	Gestion 2	Gestion 3	Enseignant	Ã‰tudiant	Parent
GÃ©rer tous utilisateurs	âœ…	âœ…	âŒ	âŒ	âŒ	âŒ	âŒ	âŒ
CrÃ©er comptes Admin	âœ…	âŒ	âŒ	âŒ	âŒ	âŒ	âŒ	âŒ
Valider notes	âŒ	âœ…	âŒ	âŒ	âŒ	âŒ	âŒ	âŒ
Arbitrer conflits	âŒ	âœ…	âŒ	âŒ	âŒ	âŒ	âŒ	âŒ
GÃ©rer EDT	âŒ	âœ…	âœ…	âŒ	âŒ	âŒ	âŒ	âŒ
GÃ©rer salles/filiÃ¨res	âŒ	âœ…	âœ…	âŒ	âŒ	âŒ	âŒ	âŒ
Inscrire Ã©tudiants	âŒ	âœ…	âŒ	âœ…	âŒ	âŒ	âŒ	âŒ
Importer notes	âŒ	âœ…	âŒ	âœ…	âŒ	âŒ	âŒ	âŒ
Marquer prÃ©sences	âŒ	âœ…	âŒ	âŒ	âœ…	âŒ	âŒ	âŒ
Saisir notes	âŒ	âœ…	âŒ	âœ…	âŒ	âœ…	âŒ	âŒ
Consulter ses notes	âŒ	âŒ	âŒ	âŒ	âŒ	âŒ	âœ…	âŒ
Consulter notes enfant	âŒ	âŒ	âŒ	âŒ	âŒ	âŒ	âŒ	âœ…
________________________________________
3. FonctionnalitÃ©s par Acteur
3.1 SUPER ADMINISTRATEUR (Gouvernance SystÃ¨me)
Description : Garant de l'intÃ©gritÃ© technique, de la sÃ©curitÃ© et de la disponibilitÃ© du systÃ¨me. Il ne s'implique PAS dans la pÃ©dagogie.
FonctionnalitÃ©s
1.	Gestion des Utilisateurs Globale

â—‹	Route : /super-admin/utilisateurs
â—‹	MÃ©thodes : GET, POST, PUT, DELETE
â—‹	Logique :
â– 	CrÃ©er des comptes pour TOUS les rÃ´les (y compris DIRECTEUR)
â– 	Modifier les informations de n'importe quel utilisateur
â– 	DÃ©sactiver/RÃ©activer des comptes
â– 	GÃ©nÃ©ration automatique de matricules uniques (format : UIST-YYYY-XXXXX)
â—‹	Contraintes :
â– 	Seul rÃ´le pouvant crÃ©er des SUPER_ADMIN
â– 	Hashage obligatoire des mots de passe (bcrypt)
â– 	Validation email unique
2.	Configuration SystÃ¨me

â—‹	Route : /super-admin/configuration
â—‹	MÃ©thodes : GET, PUT
â—‹	Logique :
â– 	DÃ©finir l'annÃ©e acadÃ©mique active (ex: 2025-2026)
â– 	Configurer les semestres (dates de dÃ©but/fin)
â– 	ParamÃ©trer les seuils d'alerte (ex: taux de prÃ©sence minimum)
â– 	GÃ©rer les paramÃ¨tres de sÃ©curitÃ© (expiration des sessions)
3.	Rapports d'Audit SystÃ¨me

â—‹	Route : /super-admin/rapports/audit
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	Consulter la table audit_usage pour toutes les actions
â– 	Filtrer par utilisateur, date, type d'action
â– 	Exporter en JSON, CSV, PDF
â—‹	DonnÃ©es affichÃ©es :
â– 	Actions de connexion/dÃ©connexion
â– 	Modifications critiques (suppressions, changements de rÃ´les)
â– 	Tentatives d'accÃ¨s non autorisÃ©
4.	Statistiques Globales

â—‹	Route : /super-admin/dashboard
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	Nombre total d'utilisateurs par rÃ´le
â– 	Taux d'activitÃ© systÃ¨me (connexions/jour)
â– 	Performance de la base de donnÃ©es (temps de rÃ©ponse moyen)
â– 	Alertes systÃ¨me (erreurs 500, accÃ¨s bloquÃ©s)
Relations
â—	Aucune relation directe avec les entitÃ©s pÃ©dagogiques (Cours, Notes, EDT)
â—	Relation : audit_usage.id_user â†’ utilisateurs.id_user
________________________________________
3.2 DIRECTEUR / ADMINISTRATEUR (Gouvernance PÃ©dagogique)
Description : AutoritÃ© pÃ©dagogique suprÃªme. Supervise toutes les branches administratives et valide les dÃ©cisions critiques. HÃ©rite des droits de Gestion 1, 2 et 3.
FonctionnalitÃ©s
1.	Gestion des Utilisateurs PÃ©dagogiques

â—‹	Route : /directeur/utilisateurs
â—‹	MÃ©thodes : GET, POST, PUT, DELETE
â—‹	Logique :
â– 	CrÃ©er des comptes ENSEIGNANT, ETUDIANT, PARENT, GESTION_X
â– 	Ne peut PAS crÃ©er de SUPER_ADMIN
â– 	Peut modifier/supprimer ces comptes
â—‹	Contraintes :
â– 	VÃ©rification hiÃ©rarchique : role_user <= role_directeur
2.	Validation Souveraine des Notes

â—‹	Route : /directeur/notes/validation
â—‹	MÃ©thodes : GET, POST
â—‹	Logique :
â– 	Lister toutes les notes en statut 'En attente'
â– 	Valider une note : UPDATE notes SET statut_validation='Valide', id_validateur=<directeur_id>
â– 	Une fois validÃ©e, la note devient immuable (sauf par le Directeur)
â—‹	RÃ¨gle mÃ©tier : Seules les notes validÃ©es sont visibles pour les Ã©tudiants
3.	Arbitrage des Conflits EDT

â—‹	Route : /directeur/conflits
â—‹	MÃ©thodes : GET, POST
â—‹	Logique :
â– 	Consulter les conflits dÃ©tectÃ©s (RG01)
â– 	Forcer la crÃ©ation d'un crÃ©neau malgrÃ© un conflit (avec justification)
â– 	RÃ©soudre un conflit en modifiant l'EDT
â—‹	Audit : Toute action de forÃ§age est tracÃ©e dans audit_usage
4.	Tableau de Bord StratÃ©gique

â—‹	Route : /directeur/dashboard
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	Taux de rÃ©ussite par filiÃ¨re
â– 	Statistiques de prÃ©sence globale (enseignants et Ã©tudiants)
â– 	Nombre de notes en attente de validation
â– 	Conflits EDT non rÃ©solus
â– 	Alertes pÃ©dagogiques (Ã©tudiants en difficultÃ©)
5.	GÃ©nÃ©ration de Rapports PÃ©dagogiques

â—‹	Route : /directeur/rapports/pedagogiques
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	Rapport de fin de semestre (moyennes par filiÃ¨re)
â– 	Classements gÃ©nÃ©raux
â– 	Taux d'assiduitÃ© par cours
â—‹	Export : PDF, Excel
Relations
â—	Toutes les entitÃ©s (peut consulter et modifier tout Ã©lÃ©ment pÃ©dagogique)
â—	Relation spÃ©cifique : notes.id_validateur â†’ utilisateurs.id_user
________________________________________
3.3 GESTION 1 (PÃ´le Logistique & Infrastructure)
Description : Responsable de l'architecture acadÃ©mique : locaux, programmes et planification temporelle.
FonctionnalitÃ©s
1.	Gestion des Salles

â—‹	Route : /gestion1/salles
â—‹	MÃ©thodes : GET, POST, PUT, DELETE
â—‹	Logique :
â– 	CRUD complet sur la table salles
â– 	Champs : nom_salle, capacite, equipements, batiment
â—‹	Validation :
â– 	CapacitÃ© > 0
â– 	Nom unique par bÃ¢timent
2.	Gestion des FiliÃ¨res

â—‹	Route : /gestion1/filieres
â—‹	MÃ©thodes : GET, POST, PUT, DELETE
â—‹	Logique :
â– 	CRUD sur filieres
â– 	DÃ©finir le niveau (L1, L2, L3, M1, M2) et l'effectif prÃ©vu
â—‹	Contrainte :
â– 	Impossible de supprimer une filiÃ¨re avec des Ã©tudiants inscrits (vÃ©rifier COUNT(etudiants))
3.	Gestion des Cours

â—‹	Route : /gestion1/cours
â—‹	MÃ©thodes : GET, POST, PUT, DELETE
â—‹	Logique :
â– 	CRUD sur cours
â– 	Lier un cours Ã  une filiÃ¨re (id_filiere)
â– 	DÃ©finir le code (unique), libellÃ©, crÃ©dits
â—‹	Validation :
â– 	Code cours unique dans le systÃ¨me
â– 	CrÃ©dits entre 1 et 10
4.	Planification de l'Emploi du Temps (EDT)

â—‹	Route : /gestion1/edt
â—‹	MÃ©thodes : GET, POST, PUT, DELETE
â—‹	Logique :
â– 	CrÃ©er un crÃ©neau : INSERT INTO emploi_du_temps
32.	VÃ©rification RG01 (IntÃ©gritÃ© EDT) avant insertion :
 SELECT COUNT(*) FROM emploi_du_tempsWHERE jour = <jour> AND semaine_numero = <semaine>AND (  (id_enseignant = <ens> AND <heure_conflit>) OR  (id_salle = <salle> AND <heure_conflit>) OR  (id_cours IN (SELECT id_cours FROM cours WHERE id_filiere = <fil>) AND <heure_conflit>))
â– 	
â– 	Si COUNT > 0 : Blocage ou alerte Directeur
â—‹	FonctionnalitÃ© avancÃ©e : Consulter les disponibilitÃ©s enseignants avant de planifier
5.	Gestion des DisponibilitÃ©s Enseignants

â—‹	Route : /gestion1/disponibilites
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	Consulter la table disponibilites_enseignants
â– 	Affichage visuel : grille hebdomadaire avec zones grises (indisponible)
â—‹	Aide Ã  la dÃ©cision : Alerte si tentative de planification sur un crÃ©neau indisponible
6.	Assignation Enseignant-Cours

â—‹	Route : /gestion1/assignation
â—‹	MÃ©thodes : POST
â—‹	Logique :
â– 	Lier un enseignant Ã  un cours via l'EDT
â– 	VÃ©rifier que l'enseignant a la spÃ©cialitÃ© appropriÃ©e
Relations
â—	Directes : salles, filieres, cours, emploi_du_temps, disponibilites_enseignants
â—	Indirectes : enseignants (lecture seule pour assignation)
________________________________________
3.4 GESTION 2 (PÃ´le ScolaritÃ© & Ã‰valuations)
Description : GÃ¨re le cycle de vie de l'Ã©tudiant et le processus d'Ã©valuation, de l'inscription Ã  la certification.
FonctionnalitÃ©s
1.	Gestion des Ã‰tudiants

â—‹	Route : /gestion2/etudiants
â—‹	MÃ©thodes : GET, POST, PUT, DELETE
â—‹	Logique :
â– 	CrÃ©ation de compte utilisateurs avec role='ETUDIANT'
â– 	Insertion dans etudiants avec id_user, id_filiere, date_naissance, adresse
33.	Workflow :
 # Ã‰tape 1 : CrÃ©er utilisateuruser_id = Utilisateur.creer(role='ETUDIANT', ...)# Ã‰tape 2 : CrÃ©er profil Ã©tudiantEtudiant.creer(id_user=user_id, id_filiere=..., ...)
â—‹	
â—‹	Validation :
â– 	Un id_user ne peut apparaÃ®tre qu'une seule fois dans etudiants
â– 	VÃ©rifier que la filiÃ¨re existe
2.	Gestion des Parents

â—‹	Route : /gestion2/parents
â—‹	MÃ©thodes : GET, POST, PUT, DELETE
â—‹	Logique :
â– 	CrÃ©er compte utilisateurs avec role='PARENT'
â– 	Insertion dans parents
â– 	Liaison avec Ã©tudiants via parente_liaison
â—‹	RÃ¨gle mÃ©tier :
â– 	Un parent peut Ãªtre liÃ© Ã  plusieurs Ã©tudiants (fratrie)
â– 	Un Ã©tudiant peut avoir plusieurs parents (pÃ¨re, mÃ¨re, tuteur)
3.	Liaison Parent-Ã‰tudiant

â—‹	Route : /gestion2/liaison-parent
â—‹	MÃ©thodes : POST, DELETE
34.	Logique :
 INSERT INTO parente_liaison (id_parent, id_etudiant, lien_parente)VALUES (<parent>, <etudiant>, 'PÃ¨re'|'MÃ¨re'|'Tuteur')
â—‹	
â—‹	Validation :
â– 	VÃ©rifier que parent et Ã©tudiant existent
â– 	EmpÃªcher les doublons (mÃªme parent-Ã©tudiant-lien)
4.	Planification des Examens

â—‹	Route : /gestion2/examens
â—‹	MÃ©thodes : GET, POST
â—‹	Logique :
â– 	CrÃ©er un crÃ©neau EDT spÃ©cifique pour un examen
â– 	Marquer le type de cours comme "Examen" (peut nÃ©cessiter une colonne type_creneau dans emploi_du_temps)
â—‹	Contraintes :
â– 	VÃ©rifier RG01 (pas de conflit de salle/enseignant)
â– 	PrÃ©voir une salle avec capacitÃ© suffisante pour la filiÃ¨re
5.	Import Massif de Notes (Excel)

â—‹	Route : /gestion2/import-notes
â—‹	MÃ©thodes : POST
â—‹	Logique :
â– 	Upload d'un fichier Excel avec colonnes : Matricule, Code_Cours, Note, Type_Evaluation
35.	Validation de chaque ligne :
 for row in excel_data:    etudiant = Etudiant.obtenir_par_matricule(row['Matricule'])    cours = Cours.obtenir_par_code(row['Code_Cours'])    if etudiant and cours:        Note.creer(            id_etudiant=etudiant.id,            id_cours=cours.id,            valeur_note=row['Note'],            statut_validation='En attente'        )
â– 	
â—‹	Gestion d'erreurs :
â– 	CrÃ©er une table import_erreurs pour tracer les lignes rejetÃ©es
â– 	Afficher un rapport post-import
6.	Saisie Manuelle de Notes

â—‹	Route : /gestion2/notes/saisie
â—‹	MÃ©thodes : POST
36.	Logique :
 INSERT INTO notes (id_etudiant, id_cours, valeur_note, statut_validation, date_saisie)VALUES (<etud>, <cours>, <note>, 'En attente', NOW())
â—‹	
â—‹	Validation :
â– 	Note entre 0 et 20
â– 	VÃ©rifier que l'Ã©tudiant est inscrit dans la filiÃ¨re du cours
7.	GÃ©nÃ©ration des Bulletins

â—‹	Route : /gestion2/bulletins/generer
â—‹	MÃ©thodes : POST
â—‹	Logique :
37.	Calculer la moyenne gÃ©nÃ©rale :
 SELECT AVG(n.valeur_note * c.credit) / SUM(c.credit) AS moyenneFROM notes nJOIN cours c ON n.id_cours = c.id_coursWHERE n.id_etudiant = <etud> AND n.statut_validation = 'Valide'AND c.id_filiere = (SELECT id_filiere FROM etudiants WHERE id_etudiant = <etud>)
â– 	
38.	Calculer le rang :
 SELECT COUNT(*) + 1 AS rangFROM (SELECT id_etudiant, AVG(valeur_note) AS moy FROM notes GROUP BY id_etudiant) AS classementWHERE moy > <moyenne_etudiant>
â– 	
â– 	GÃ©nÃ©rer le PDF (ReportLab)
â– 	Sauvegarder dans bulletins avec chemin_pdf
â—‹	RÃ¨gle : Seules les notes validÃ©es sont incluses
8.	Ã‰dition des ProcÃ¨s-Verbaux (PV)

â—‹	Route : /gestion2/pv/generer
â—‹	MÃ©thodes : POST
â—‹	Logique :
â– 	GÃ©nÃ©rer un document rÃ©capitulatif pour une filiÃ¨re/semestre
â– 	Inclure : liste des Ã©tudiants, moyennes, dÃ©cisions (admis/ajournÃ©)
â—‹	Format : PDF officiel avec en-tÃªte institutionnel
Relations
â—	Directes : etudiants, parents, parente_liaison, notes, bulletins
â—	Indirectes : cours (pour validation des notes), filieres (pour inscription)
________________________________________
3.5 GESTION 3 (PÃ´le Suivi & ContrÃ´le)
Description : Vigilance quotidienne sur les prÃ©sences et dÃ©tection des anomalies de planification.
FonctionnalitÃ©s
1.	Marquage des PrÃ©sences

â—‹	Route : /gestion3/presences/marquer
â—‹	MÃ©thodes : POST
39.	Logique :
 INSERT INTO presences (id_edt, statut, date_pointage, commentaire)VALUES (<creneau>, 'Present'|'Absent'|'Retard', CURDATE(), <comment>)
â—‹	
â—‹	Interface : Liste des crÃ©neaux du jour avec boutons radio (PrÃ©sent/Absent/Retard)
2.	Statistiques de PrÃ©sence

â—‹	Route : /gestion3/presences/statistiques
â—‹	MÃ©thodes : GET
40.	Logique :
 SELECT   e.nom, e.prenom,  COUNT(p.id_presence) AS total_cours,  SUM(CASE WHEN p.statut = 'Present' THEN 1 ELSE 0 END) AS presents,  (SUM(CASE WHEN p.statut = 'Present' THEN 1 ELSE 0 END) * 100.0 / COUNT(p.id_presence)) AS tauxFROM enseignants ensJOIN utilisateurs e ON ens.id_user = e.id_userLEFT JOIN emploi_du_temps edt ON ens.id_enseignant = edt.id_enseignantLEFT JOIN presences p ON edt.id_edt = p.id_edtGROUP BY ens.id_enseignant
â—‹	
â—‹	Affichage : Tableau avec alertes pour taux < 80%
3.	Monitoring des Conflits EDT

â—‹	Route : /gestion3/conflits/detection
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	ExÃ©cuter une requÃªte de dÃ©tection en temps rÃ©el (similaire Ã  RG01)
â– 	Lister les crÃ©neaux en conflit avec dÃ©tails (enseignant/salle/filiÃ¨re)
â—‹	Actions :
â– 	Notifier Gestion 1 et Directeur
â– 	Proposer des crÃ©neaux alternatifs
4.	Gestion de la Messagerie Interne

â—‹	Route : /gestion3/messages
â—‹	MÃ©thodes : GET, POST
â—‹	Logique :
â– 	CrÃ©er/consulter des messages entre utilisateurs
â– 	Notifications pour : notes validÃ©es, changements EDT, rappels examens
â—‹	Table : messages (id_expediteur, id_destinataire, contenu, date)
5.	Alertes Automatiques

â—‹	Route : /gestion3/alertes
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	DÃ©tecter les Ã©tudiants avec taux de prÃ©sence < 75%
â– 	DÃ©tecter les notes anormales (< 5 ou = 0)
â– 	GÃ©nÃ©rer des notifications pour les parents concernÃ©s
Relations
â—	Directes : presences, messages
â—	Indirectes : emploi_du_temps (pour pointage), etudiants (pour alertes)
________________________________________
3.6 ENSEIGNANT
Description : Acteur pÃ©dagogique sur le terrain. Saisit les notes et consulte son emploi du temps.
FonctionnalitÃ©s
1.	DÃ©claration des DisponibilitÃ©s

â—‹	Route : /enseignant/disponibilites
â—‹	MÃ©thodes : GET, POST, DELETE
41.	Logique :
 INSERT INTO disponibilites_enseignants (id_enseignant, jour, heure_debut, heure_fin, est_disponible)VALUES (<ens>, 'Lundi', '08:00', '12:00', FALSE)
â—‹	
â—‹	Interface : Grille hebdomadaire interactive oÃ¹ l'enseignant clique pour marquer les indisponibilitÃ©s
2.	Consultation de l'EDT Personnel

â—‹	Route : /enseignant/edt
â—‹	MÃ©thodes : GET
42.	Logique :
 SELECT edt.*, c.libelle, s.nom_salle, f.nom_filiereFROM emploi_du_temps edtJOIN cours c ON edt.id_cours = c.id_coursJOIN salles s ON edt.id_salle = s.id_salleJOIN filieres f ON c.id_filiere = f.id_filiereWHERE edt.id_enseignant = (SELECT id_enseignant FROM enseignants WHERE id_user = <current_user>)AND edt.semaine_numero = <semaine_actuelle>ORDER BY edt.jour, edt.heure_debut
â—‹	
â—‹	Affichage : Calendrier hebdomadaire visuel
3.	Saisie de Notes

â—‹	Route : /enseignant/notes/saisie
â—‹	MÃ©thodes : POST
â—‹	Logique :
â– 	Afficher la liste des cours assignÃ©s Ã  l'enseignant
â– 	Pour chaque cours, afficher les Ã©tudiants de la filiÃ¨re
43.	Saisir les notes :
 INSERT INTO notes (id_etudiant, id_cours, valeur_note, statut_validation, date_saisie)VALUES (<etud>, <cours_enseignant>, <note>, 'En attente', NOW())
â– 	
â—‹	Contraintes :
â– 	L'enseignant ne peut saisir que pour SES cours (vÃ©rifier emploi_du_temps.id_enseignant)
â– 	Note entre 0 et 20
4.	Historique des Notes Saisies

â—‹	Route : /enseignant/notes/historique
â—‹	MÃ©thodes : GET
44.	Logique :
 SELECT n.*, e.nom, e.prenom, c.libelleFROM notes nJOIN etudiants et ON n.id_etudiant = et.id_etudiantJOIN utilisateurs e ON et.id_user = e.id_userJOIN cours c ON n.id_cours = c.id_coursJOIN emploi_du_temps edt ON c.id_cours = edt.id_coursWHERE edt.id_enseignant = (SELECT id_enseignant FROM enseignants WHERE id_user = <current_user>)ORDER BY n.date_saisie DESC
â—‹	
5.	Tableau de Bord Personnel

â—‹	Route : /enseignant/dashboard
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	Nombre de cours cette semaine
â– 	Taux de prÃ©sence personnel
â– 	Nombre de notes saisies (en attente vs validÃ©es)
Relations
â—	Directes : enseignants, disponibilites_enseignants, notes (crÃ©ation)
â—	Indirectes : emploi_du_temps (consultation), etudiants (via cours)
________________________________________
3.7 Ã‰TUDIANT
Description : BÃ©nÃ©ficiaire final du systÃ¨me. Consultation uniquement de ses propres donnÃ©es.
FonctionnalitÃ©s
1.	Consultation de l'EDT Personnel

â—‹	Route : /etudiant/edt
â—‹	MÃ©thodes : GET
45.	Logique :
 SELECT edt.*, c.libelle, ens_u.nom AS enseignant_nom, s.nom_salleFROM emploi_du_temps edtJOIN cours c ON edt.id_cours = c.id_coursJOIN enseignants ens ON edt.id_enseignant = ens.id_enseignantJOIN utilisateurs ens_u ON ens.id_user = ens_u.id_userJOIN salles s ON edt.id_salle = s.id_salleWHERE c.id_filiere = (SELECT id_filiere FROM etudiants WHERE id_user = <current_user>)AND edt.semaine_numero = <semaine>
â—‹	
2.	Consultation des Notes

â—‹	Route : /etudiant/notes
â—‹	MÃ©thodes : GET
46.	Logique :
 SELECT n.valeur_note, n.date_saisie, c.libelle, c.creditFROM notes nJOIN cours c ON n.id_cours = c.id_coursWHERE n.id_etudiant = (SELECT id_etudiant FROM etudiants WHERE id_user = <current_user>)AND n.statut_validation = 'Valide'  -- CRITIQUE : Seules les notes validÃ©esORDER BY n.date_saisie DESC
â—‹	
â—‹	Affichage : Tableau avec calcul de moyenne automatique
3.	Consultation des Bulletins

â—‹	Route : /etudiant/bulletins
â—‹	MÃ©thodes : GET
â—‹	
Logique : sql SELECT b.*, b.chemin_pdf FROM bulletins b WHERE b.id_etudiant = (SELECT id_etudiant FROM etudiants WHERE id_user = <current_user>) ORDER BY b.annee_academique DESC, b.semestre DESC
â—	Action : TÃ©lÃ©charger le PDF
4.	Profil Personnel

â—‹	Route : /etudiant/profil
â—‹	MÃ©thodes : GET, PUT
â—‹	Logique :
â– 	Consulter : nom, prÃ©nom, matricule, filiÃ¨re, date de naissance
â– 	Modifier : adresse, email (avec validation)
5.	Tableau de Bord

â—‹	Route : /etudiant/dashboard
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	Moyenne gÃ©nÃ©rale actuelle
â– 	Classement dans la filiÃ¨re
â– 	Prochain cours (requÃªte sur EDT avec NOW())
Relations
â—	Directes : etudiants, notes (lecture seule), bulletins (lecture seule)
â—	Indirectes : cours, emploi_du_temps (via filiÃ¨re)
________________________________________
3.8 PARENT
Description : Tuteur lÃ©gal suivant la progression acadÃ©mique de son/ses enfant(s).
FonctionnalitÃ©s
1.	SÃ©lection de l'Enfant

â—‹	Route : /parent/enfants
â—‹	MÃ©thodes : GET
47.	Logique :
 SELECT e.id_etudiant, u.nom, u.prenom, f.nom_filiereFROM parente_liaison plJOIN etudiants e ON pl.id_etudiant = e.id_etudiantJOIN utilisateurs u ON e.id_user = u.id_userJOIN filieres f ON e.id_filiere = f.id_filiereWHERE pl.id_parent = (SELECT id_parent FROM parents WHERE id_user = <current_user>)
â—‹	
â—‹	Interface : Liste dÃ©roulante si plusieurs enfants
2.	Consultation de l'EDT de l'Enfant

â—‹	Route : /parent/enfant/<id_etudiant>/edt
â—‹	MÃ©thodes : GET
48.	Logique : Identique Ã  Ã‰tudiant, mais avec vÃ©rification :
 # VÃ©rifier que le parent a le droit de voir cet Ã©tudiantif not ParenteLiaison.verifier_lien(parent_id, etudiant_id):    abort(403)
â—‹	
3.	Consultation des Notes de l'Enfant

â—‹	Route : /parent/enfant/<id_etudiant>/notes
â—‹	MÃ©thodes : GET
49.	Logique :
 SELECT n.valeur_note, n.date_saisie, c.libelleFROM notes nJOIN cours c ON n.id_cours = c.id_coursWHERE n.id_etudiant = <id_etudiant>AND n.statut_validation = 'Valide'AND EXISTS (  SELECT 1 FROM parente_liaison   WHERE id_parent = (SELECT id_parent FROM parents WHERE id_user = <current_user>)  AND id_etudiant = <id_etudiant>)
â—‹	
4.	Consultation de l'AssiduitÃ©

â—‹	Route : /parent/enfant/<id_etudiant>/assiduite
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	Calculer le taux de prÃ©sence de l'enfant (si la fonctionnalitÃ© existe pour les Ã©tudiants)
â– 	Afficher les absences rÃ©centes
5.	RÃ©ception de Notifications

â—‹	Route : /parent/notifications
â—‹	MÃ©thodes : GET
â—‹	Logique :
â– 	Lister les messages systÃ¨me :
â– 	"Nouvelle note validÃ©e pour [Enfant]"
â– 	"Modification de l'EDT de [Enfant]"
â– 	"Alerte : Taux de prÃ©sence faible pour [Enfant]"
Relations
â—	Directes : parents, parente_liaison
â—	Indirectes : etudiants, notes (via liaison), emploi_du_temps (via Ã©tudiant)
________________________________________
4. Relations et ModÃ¨le de DonnÃ©es
4.1 SchÃ©ma de Base de DonnÃ©es CorrigÃ©
50.	-- ==========================================================
51.	-- UIST-PLANIFY : SCHÃ‰MA COMPLET COHÃ‰RENT
52.	-- ==========================================================
53.	
54.	CREATE DATABASE IF NOT EXISTS uist_planify_db 
55.	CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
56.	
57.	USE uist_planify_db;
58.	
59.	-- ==========================================================
60.	-- COUCHE GOUVERNANCE
61.	-- ==========================================================
62.	
63.	CREATE TABLE utilisateurs (
64.	    id_user INT PRIMARY KEY AUTO_INCREMENT,
65.	    matricule VARCHAR(20) UNIQUE NOT NULL,
66.	    nom VARCHAR(100) NOT NULL,
67.	    prenom VARCHAR(100) NOT NULL,
68.	    email VARCHAR(150) UNIQUE NOT NULL,
69.	    mot_de_passe VARCHAR(255) NOT NULL, -- Bcrypt hash
70.	    role ENUM(
71.	        'SUPER_ADMIN', 
72.	        'DIRECTEUR', 
73.	        'GESTION_1', 
74.	        'GESTION_2', 
75.	        'GESTION_3', 
76.	        'ENSEIGNANT', 
77.	        'ETUDIANT', 
78.	        'PARENT'
79.	    ) NOT NULL,
80.	    est_actif BOOLEAN DEFAULT TRUE,
81.	    date_creation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
82.	    derniere_connexion TIMESTAMP NULL,
83.	    INDEX idx_role (role),
84.	    INDEX idx_email (email)
85.	) ENGINE=InnoDB;
86.	
87.	CREATE TABLE audit_usage (
88.	    id_audit INT PRIMARY KEY AUTO_INCREMENT,
89.	    id_user INT,
90.	    action VARCHAR(255) NOT NULL,
91.	    table_affectee VARCHAR(50),
92.	    id_enregistrement INT, -- ID de l'Ã©lÃ©ment modifiÃ©
93.	    details TEXT,
94.	    ip_address VARCHAR(45),
95.	    date_action TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
96.	    FOREIGN KEY (id_user) REFERENCES utilisateurs(id_user) ON DELETE SET NULL,
97.	    INDEX idx_user_date (id_user, date_action)
98.	) ENGINE=InnoDB;
99.	
100.	-- ==========================================================
101.	-- POLE GESTION 1 : Infrastructure
102.	-- ==========================================================
103.	
104.	CREATE TABLE salles (
105.	    id_salle INT PRIMARY KEY AUTO_INCREMENT,
106.	    nom_salle VARCHAR(50) NOT NULL,
107.	    capacite INT NOT NULL CHECK (capacite > 0),
108.	    equipements TEXT,
109.	    batiment VARCHAR(50),
110.	    est_active BOOLEAN DEFAULT TRUE,
111.	    UNIQUE KEY unique_salle_batiment (nom_salle, batiment)
112.	) ENGINE=InnoDB;
113.	
114.	CREATE TABLE filieres (
115.	    id_filiere INT PRIMARY KEY AUTO_INCREMENT,
116.	    code_filiere VARCHAR(20) UNIQUE NOT NULL,
117.	    nom_filiere VARCHAR(100) NOT NULL,
118.	    niveau VARCHAR(20) NOT NULL, -- L1, L2, L3, M1, M2
119.	    effectif_prevu INT DEFAULT 0,
120.	    INDEX idx_niveau (niveau)
121.	) ENGINE=InnoDB;
122.	
123.	CREATE TABLE enseignants (
124.	    id_enseignant INT PRIMARY KEY AUTO_INCREMENT,
125.	    id_user INT UNIQUE NOT NULL,
126.	    specialite VARCHAR(150),
127.	    telephone VARCHAR(20),
128.	    total_heures_prevues DECIMAL(6,2) DEFAULT 0,
129.	    total_heures_effectuees DECIMAL(6,2) DEFAULT 0,
130.	    FOREIGN KEY (id_user) REFERENCES utilisateurs(id_user) ON DELETE CASCADE
131.	) ENGINE=InnoDB;
132.	
133.	CREATE TABLE cours (
134.	    id_cours INT PRIMARY KEY AUTO_INCREMENT,
135.	    code_cours VARCHAR(20) UNIQUE NOT NULL,
136.	    libelle VARCHAR(150) NOT NULL,
137.	    credit INT DEFAULT 1 CHECK (credit BETWEEN 1 AND 10),
138.	    id_filiere INT NOT NULL,
139.	    coefficient DECIMAL(3,2) DEFAULT 1.00,
140.	    FOREIGN KEY (id_filiere) REFERENCES filieres(id_filiere) ON DELETE CASCADE,
141.	    INDEX idx_filiere (id_filiere)
142.	) ENGINE=InnoDB;
143.	
144.	CREATE TABLE disponibilites_enseignants (
145.	    id_dispo INT PRIMARY KEY AUTO_INCREMENT,
146.	    id_enseignant INT NOT NULL,
147.	    jour ENUM('Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi') NOT NULL,
148.	    heure_debut TIME NOT NULL,
149.	    heure_fin TIME NOT NULL,
150.	    est_disponible BOOLEAN DEFAULT TRUE,
151.	    type_contrainte ENUM('Fixe', 'Prefere', 'Exceptionnel') DEFAULT 'Fixe',
152.	    motif TEXT,
153.	    FOREIGN KEY (id_enseignant) REFERENCES enseignants(id_enseignant) ON DELETE CASCADE,
154.	    INDEX idx_enseignant_jour (id_enseignant, jour)
155.	) ENGINE=InnoDB;
156.	
157.	-- ==========================================================
158.	-- POLE GESTION 3 : Planification & Suivi
159.	-- ==========================================================
160.	
161.	CREATE TABLE emploi_du_temps (
162.	    id_edt INT PRIMARY KEY AUTO_INCREMENT,
163.	    id_cours INT NOT NULL,
164.	    id_enseignant INT NOT NULL,
165.	    id_salle INT NOT NULL,
166.	    jour ENUM('Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi') NOT NULL,
167.	    heure_debut TIME NOT NULL,
168.	    heure_fin TIME NOT NULL,
169.	    semaine_numero INT NOT NULL CHECK (semaine_numero BETWEEN 1 AND 52),
170.	    annee_academique VARCHAR(9) NOT NULL, -- Ex: 2025-2026
171.	    type_creneau ENUM('Cours', 'TD', 'TP', 'Examen') DEFAULT 'Cours',
172.	    FOREIGN KEY (id_cours) REFERENCES cours(id_cours) ON DELETE CASCADE,
173.	    FOREIGN KEY (id_enseignant) REFERENCES enseignants(id_enseignant) ON DELETE RESTRICT,
174.	    FOREIGN KEY (id_salle) REFERENCES salles(id_salle) ON DELETE RESTRICT,
175.	    INDEX idx_semaine_jour (semaine_numero, jour),
176.	    INDEX idx_enseignant (id_enseignant),
177.	    INDEX idx_salle (id_salle)
178.	) ENGINE=InnoDB;
179.	
180.	CREATE TABLE presences (
181.	    id_presence INT PRIMARY KEY AUTO_INCREMENT,
182.	    id_edt INT NOT NULL,
183.	    statut ENUM('Present', 'Absent', 'Retard') DEFAULT 'Present',
184.	    date_pointage DATE NOT NULL,
185.	    heure_pointage TIME,
186.	    commentaire VARCHAR(255),
187.	    marque_par INT, -- Gestionnaire qui a marquÃ©
188.	    FOREIGN KEY (id_edt) REFERENCES emploi_du_temps(id_edt) ON DELETE CASCADE,
189.	    FOREIGN KEY (marque_par) REFERENCES utilisateurs(id_user) ON DELETE SET NULL,
190.	    UNIQUE KEY unique_pointage (id_edt, date_pointage),
191.	    INDEX idx_date (date_pointage)
192.	) ENGINE=InnoDB;
193.	
194.	-- ==========================================================
195.	-- POLE GESTION 2 : ScolaritÃ©
196.	-- ==========================================================
197.	
198.	CREATE TABLE etudiants (
199.	    id_etudiant INT PRIMARY KEY AUTO_INCREMENT,
200.	    id_user INT UNIQUE NOT NULL,
201.	    id_filiere INT NOT NULL,
202.	    date_naissance DATE,
203.	    lieu_naissance VARCHAR(100),
204.	    adresse TEXT,
205.	    telephone VARCHAR(20),
206.	    date_inscription DATE DEFAULT (CURRENT_DATE),
207.	    FOREIGN KEY (id_user) REFERENCES utilisateurs(id_user) ON DELETE CASCADE,
208.	    FOREIGN KEY (id_filiere) REFERENCES filieres(id_filiere) ON DELETE RESTRICT,
209.	    INDEX idx_filiere (id_filiere)
210.	) ENGINE=InnoDB;
211.	
212.	CREATE TABLE parents (
213.	    id_parent INT PRIMARY KEY AUTO_INCREMENT,
214.	    id_user INT UNIQUE NOT NULL,
215.	    profession VARCHAR(100),
216.	    telephone VARCHAR(20),
217.	    adresse TEXT,
218.	    FOREIGN KEY (id_user) REFERENCES utilisateurs(id_user) ON DELETE CASCADE
219.	) ENGINE=InnoDB;
220.	
221.	CREATE TABLE parente_liaison (
222.	    id_liaison INT PRIMARY KEY AUTO_INCREMENT,
223.	    id_parent INT NOT NULL,
224.	    id_etudiant INT NOT NULL,
225.	    lien_parente ENUM('PÃ¨re', 'MÃ¨re', 'Tuteur', 'Autre') NOT NULL,
226.	    est_contact_principal BOOLEAN DEFAULT FALSE,
227.	    FOREIGN KEY (id_parent) REFERENCES parents(id_parent) ON DELETE CASCADE,
228.	    FOREIGN KEY (id_etudiant) REFERENCES etudiants(id_etudiant) ON DELETE CASCADE,
229.	    UNIQUE KEY unique_parent_etudiant (id_parent, id_etudiant)
230.	) ENGINE=InnoDB;
231.	
232.	CREATE TABLE notes (
233.	    id_note INT PRIMARY KEY AUTO_INCREMENT,
234.	    id_etudiant INT NOT NULL,
235.	    id_cours INT NOT NULL,
236.	    valeur_note DECIMAL(4,2) NOT NULL CHECK (valeur_note BETWEEN 0 AND 20),
237.	    type_evaluation ENUM('Devoir', 'Controle', 'Examen', 'TP', 'Projet') NOT NULL,
238.	    coefficient DECIMAL(3,2) DEFAULT 1.00,
239.	    statut_validation ENUM('En attente', 'Valide') DEFAULT 'En attente',
240.	    id_validateur INT, -- Le Directeur
241.	    date_saisie TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
242.	    date_validation TIMESTAMP NULL,
243.	    commentaire TEXT,
244.	    FOREIGN KEY (id_etudiant) REFERENCES etudiants(id_etudiant) ON DELETE CASCADE,
245.	    FOREIGN KEY (id_cours) REFERENCES cours(id_cours) ON DELETE RESTRICT,
246.	    FOREIGN KEY (id_validateur) REFERENCES utilisateurs(id_user) ON DELETE SET NULL,
247.	    INDEX idx_etudiant_cours (id_etudiant, id_cours),
248.	    INDEX idx_statut (statut_validation)
249.	) ENGINE=InnoDB;
250.	
251.	CREATE TABLE bulletins (
252.	    id_bulletin INT PRIMARY KEY AUTO_INCREMENT,
253.	    id_etudiant INT NOT NULL,
254.	    moyenne_generale DECIMAL(4,2),
255.	    rang INT,
256.	    semestre INT CHECK (semestre IN (1, 2)),
257.	    annee_academique VARCHAR(9) NOT NULL,
258.	    chemin_pdf VARCHAR(255),
259.	    date_generation TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
260.	    genere_par INT,
261.	    FOREIGN KEY (id_etudiant) REFERENCES etudiants(id_etudiant) ON DELETE CASCADE,
262.	    FOREIGN KEY (genere_par) REFERENCES utilisateurs(id_user) ON DELETE SET NULL,
263.	    UNIQUE KEY unique_bulletin (id_etudiant, semestre, annee_academique),
264.	    INDEX idx_annee (annee_academique)
265.	) ENGINE=InnoDB;
266.	
267.	-- ==========================================================
268.	-- MESSAGERIE & NOTIFICATIONS
269.	-- ==========================================================
270.	
271.	CREATE TABLE messages (
272.	    id_message INT PRIMARY KEY AUTO_INCREMENT,
273.	    id_expediteur INT NOT NULL,
274.	    id_destinataire INT NOT NULL,
275.	    objet VARCHAR(200),
276.	    contenu TEXT NOT NULL,
277.	    est_lu BOOLEAN DEFAULT FALSE,
278.	    date_envoi TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
279.	    date_lecture TIMESTAMP NULL,
280.	    FOREIGN KEY (id_expediteur) REFERENCES utilisateurs(id_user) ON DELETE CASCADE,
281.	    FOREIGN KEY (id_destinataire) REFERENCES utilisateurs(id_user) ON DELETE CASCADE,
282.	    INDEX idx_destinataire (id_destinataire, est_lu)
283.	) ENGINE=InnoDB;
284.	
285.	-- ==========================================================
286.	-- CONFIGURATION SYSTÃˆME
287.	-- ==========================================================
288.	
289.	CREATE TABLE configuration_systeme (
290.	    id_config INT PRIMARY KEY AUTO_INCREMENT,
291.	    cle VARCHAR(100) UNIQUE NOT NULL,
292.	    valeur TEXT,
293.	    description VARCHAR(255),
294.	    modifie_par INT,
295.	    date_modification TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
296.	    FOREIGN KEY (modifie_par) REFERENCES utilisateurs(id_user) ON DELETE SET NULL
297.	) ENGINE=InnoDB;
298.	
299.	-- Initialisation des configurations par dÃ©faut
300.	INSERT INTO configuration_systeme (cle, valeur, description) VALUES
301.	('annee_academique_actuelle', '2025-2026', 'AnnÃ©e acadÃ©mique en cours'),
302.	('semestre_actuel', '1', 'Semestre actuel (1 ou 2)'),
303.	('taux_presence_minimum', '75', 'Taux de prÃ©sence minimum requis (%)'),
304.	('duree_session_minutes', '120', 'DurÃ©e de validitÃ© des sessions en minutes');

4.2 Diagramme EntitÃ©-Association (Textuel)
305.	UTILISATEURS (1) â”€â”€â”¬â”€â”€ (1) ENSEIGNANTS
306.	                   â”œâ”€â”€ (1) ETUDIANTS â”€â”€â”€â”€ (N) NOTES
307.	                   â”œâ”€â”€ (1) PARENTS       â”œâ”€â”€ (N) BULLETINS
308.	                   â””â”€â”€ (N) AUDIT_USAGE   â””â”€â”€ (1) FILIERES â”€â”€â”€â”€ (N) COURS
309.	                                                                    â”‚
310.	SALLES (N) â”€â”€â”€â”€â”                                                   â”‚
311.	               â”‚                                                    â”‚
312.	ENSEIGNANTSâ”€â”€â”€â”€â”¤â”€â”€ (N) EMPLOI_DU_TEMPS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
313.	               â”‚           â”‚
314.	COURS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€ (N) PRESENCES
315.	               
316.	PARENTS â”€â”€â”€â”€â”¬â”€â”€ (N) PARENTE_LIAISON â”€â”€â”¬â”€â”€ (N) ETUDIANTS
317.	            â”‚                          â”‚
318.	            â””â”€â”€ (N) MESSAGES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€ (N) UTILISATEURS
319.	
320.	ENSEIGNANTS â”€â”€â”€â”€ (N) DISPONIBILITES_ENSEIGNANTS

4.3 RÃ¨gles d'IntÃ©gritÃ© RÃ©fÃ©rentielle
1.	RG01 - IntÃ©gritÃ© EDT : Un crÃ©neau ne peut Ãªtre crÃ©Ã© si :

â—‹	L'enseignant est dÃ©jÃ  occupÃ© (mÃªme jour, mÃªme heure)
â—‹	La salle est dÃ©jÃ  rÃ©servÃ©e
â—‹	La filiÃ¨re (via le cours) a dÃ©jÃ  un cours programmÃ©
2.	RG02 - Aide Ã  la DÃ©cision : Alerte si crÃ©ation EDT sur crÃ©neau marquÃ© comme indisponible par l'enseignant

3.	RG03 - Validation des Notes : Une note en statut "En attente" ne peut Ãªtre consultÃ©e que par :

â—‹	L'enseignant qui l'a saisie
â—‹	Gestion 2
â—‹	Le Directeur
4.	RG04 - HiÃ©rarchie des RÃ´les : Un utilisateur ne peut crÃ©er/modifier un compte avec un rÃ´le supÃ©rieur au sien

5.	RG05 - UnicitÃ© des Profils : Un id_user ne peut apparaÃ®tre qu'une seule fois dans chaque table de profil (enseignants, etudiants, parents)

6.	RG06 - Protection des Bulletins : Un bulletin ne peut Ãªtre gÃ©nÃ©rÃ© que si toutes les notes du semestre sont validÃ©es

________________________________________
5. Diagrammes UML
Je vais crÃ©er les diagrammes UML suivants :
1.	Diagramme de cas d'utilisation global
2.	Diagrammes de cas d'utilisation par acteur
3.	Diagramme de classes
4.	Diagrammes de sÃ©quence pour les processus critiquesParfait ! J'ai crÃ©Ã© une documentation complÃ¨te et cohÃ©rente du systÃ¨me UIST-Planify. Voici un rÃ©sumÃ© de ce qui a Ã©tÃ© fourni :
Contenu de la Documentation
1. Architecture Globale
â—	Structure en 4 couches hiÃ©rarchiques (Gouvernance SystÃ¨me â†’ Gouvernance PÃ©dagogique â†’ Administration OpÃ©rationnelle â†’ Utilisateurs Finaux)
â—	Principes du moindre privilÃ¨ge et sÃ©paration des responsabilitÃ©s
â—	Stack technique dÃ©taillÃ©
2. 8 Acteurs DÃ©taillÃ©s avec pour chacun :
â—	âœ… Description du rÃ´le
â—	âœ… FonctionnalitÃ©s complÃ¨tes avec routes HTTP
â—	âœ… Logique mÃ©tier dÃ©taillÃ©e (requÃªtes SQL, workflows)
â—	âœ… Contraintes et validations
â—	âœ… Relations avec les autres entitÃ©s
Acteurs couverts :
1.	Super Administrateur - Gestion technique du systÃ¨me
2.	Directeur - AutoritÃ© pÃ©dagogique et validation finale
3.	Gestion 1 - Infrastructure et planification EDT
4.	Gestion 2 - ScolaritÃ© et Ã©valuations
5.	Gestion 3 - Suivi et contrÃ´le des prÃ©sences
6.	Enseignant - Saisie de notes et disponibilitÃ©s
7.	Ã‰tudiant - Consultation de ses donnÃ©es
8.	Parent - Suivi de l'enfant
3. ModÃ¨le de DonnÃ©es CorrigÃ©
â—	SchÃ©ma SQL complet avec contraintes d'intÃ©gritÃ©
â—	Relations clarifiÃ©es (1:1, 1:N, N:N)
â—	6 rÃ¨gles d'intÃ©gritÃ© (RG01 Ã  RG06)
â—	Index et optimisations
4. 9 Diagrammes UML
Diagrammes de Cas d'Utilisation :
1.	Global - Vue d'ensemble du systÃ¨me
2.	Super Administrateur - 15 cas d'utilisation
3.	Directeur - 18 cas d'utilisation
4.	Gestion 1 - 21 cas d'utilisation (logistique)
5.	Gestion 2 - 22 cas d'utilisation (scolaritÃ©)
6.	Gestion 3 - 21 cas d'utilisation (suivi)
7.	Enseignant - 19 cas d'utilisation
8.	Ã‰tudiant - 19 cas d'utilisation
9.	Parent - 20 cas d'utilisation
Diagramme de Classes :
â—	14 classes interconnectÃ©es
â—	MÃ©thodes clÃ©s pour chaque entitÃ©
â—	CardinalitÃ©s prÃ©cises
Diagrammes de SÃ©quence :
1.	Validation des Notes - Processus complet (Enseignant â†’ Directeur â†’ Ã‰tudiant)
2.	CrÃ©ation EDT avec VÃ©rification Conflits - Workflow RG01 + RG02
3.	GÃ©nÃ©ration de Bulletin - Calcul moyennes, rangs et PDF
ğŸ”‘ Corrections Majeures des IncohÃ©rences
1. HiÃ©rarchie des RÃ´les ClarifiÃ©e
321.	SUPER_ADMIN (niveau 5) - CrÃ©e tous les comptes
322.	    â†“
323.	DIRECTEUR (niveau 4) - Valide les notes, arbitre
324.	    â†“
325.	GESTION_1/2/3 (niveau 3) - SpÃ©cialisations
326.	    â†“
327.	ENSEIGNANT (niveau 2) - Saisie
328.	    â†“
329.	ETUDIANT/PARENT (niveau 1) - Consultation

2. Circuit des Notes SÃ©curisÃ©
1.	Enseignant saisit â†’ Statut "En attente"
2.	Directeur valide â†’ Statut "Valide" + id_validateur
3.	Ã‰tudiant consulte â†’ Uniquement les notes validÃ©es
3. VÃ©rification EDT (RG01 + RG02)
â—	RG01 : Blocage si conflit Enseignant/Salle/FiliÃ¨re
â—	RG02 : Alerte si crÃ©neau sur disponibilitÃ© enseignant
4. Relations Parent-Ã‰tudiant N:N
â—	Table parente_liaison pour gÃ©rer les fratries
â—	Un parent peut suivre plusieurs enfants
â—	Un Ã©tudiant peut avoir plusieurs parents (pÃ¨re, mÃ¨re, tuteur)
5. TraÃ§abilitÃ© ComplÃ¨te
â—	Table audit_usage pour toutes les actions critiques
â—	Sauvegarde de id_user, action, table_affectee, details, ip_address
Cette documentation peut maintenant servir de rÃ©fÃ©rence complÃ¨te pour l'implÃ©mentation ou la refonte du systÃ¨me UIST-2ITS



 

 

 

 

 

 

 

 

 

 

 

 

 

4. Charte Graphique : UIST-Planify
La charte graphique vise Ã  instaurer la confiance, la clartÃ© et le professionnalisme.
4.1 Palette de Couleurs
â—	Bleu Institutionnel (#1A365D) : Couleur primaire. UtilisÃ©e pour la barre de navigation et les titres majeurs. Symbolise le sÃ©rieux et l'autoritÃ©.
â—	Or AcadÃ©mique (#D4AF37) : Couleur secondaire. UtilisÃ©e pour les boutons d'action importants (Validation, Export) et les distinctions (Rang 1).
â—	Gris Ardoise (#4A5568) : Texte secondaire et icÃ´nes.
â—	Blanc Pur (#FFFFFF) : Fond des cartes et de la zone de travail pour maximiser la lisibilitÃ©.
â—	Couleurs d'Ã‰tat :
â—‹	SuccÃ¨s : #2F855A (Note validÃ©e, PrÃ©sent)
â—‹	Alerte : #C53030 (Conflit EDT, Absent)
â—‹	Info : #2B6CB0 (Note en attente)
4.2 Typographie
â—	Titres : Montserrat (Gras) - Moderne et gÃ©omÃ©trique.
â—	Corps de texte : Open Sans - Excellente lisibilitÃ© sur Ã©cran pour les tableaux de notes.
4.3 Ã‰lÃ©ments d'Interface (UI)
â—	Tableaux : Style "Zebra" (lignes alternÃ©es) avec surbrillance au survol.
â—	Badges : Arrondis pour les statuts (ex: [ ValidÃ© ], [ En attente ]).
â—	Dashboard : Utilisation de cartes (Cards) blanches avec une lÃ©gÃ¨re ombre portÃ©e (box-shadow) pour sÃ©parer les indicateurs clÃ©s.
________________________________________
5. Logique de Calcul des Bulletins (CorrigÃ©e)
Pour Ã©viter les incohÃ©rences de la classe Bulletin, le calcul est centralisÃ© via cette formule mathÃ©matique pour chaque Ã©tudiant par semestre :
$$Moyenne = \frac{\sum_{i=1}^{n} (Note_i \times Credit_i)}{\sum_{i=1}^{n} Credit_i}$$
Note importante : Le systÃ¨me ne prend en compte que les notes dont le statut_validation = 'Valide'. Si une note est manquante, le systÃ¨me gÃ©nÃ¨re une alerte pour l'acteur Gestion 2.

