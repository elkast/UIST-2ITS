<!-- Widget de notifications temps réel -->
<div class="relative">
    <!-- Bouton notifications -->
    <button id="notifications-button" class="relative p-2 text-gray-600 hover:text-blue-600 focus:outline-none">
        <i class="fas fa-bell text-xl"></i>
        <span id="notification-badge" class="hidden absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
            0
        </span>
    </button>
    
    <!-- Dropdown notifications -->
    <div id="notifications-dropdown" class="hidden absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-xl border z-50 max-h-96 overflow-hidden">
        <!-- En-tête -->
        <div class="flex items-center justify-between p-3 border-b bg-gray-50">
            <h3 class="font-semibold text-gray-800">
                <i class="fas fa-bell mr-2"></i>
                Notifications
            </h3>
            <button id="mark-all-read-btn" class="text-xs text-blue-600 hover:text-blue-800">
                Tout marquer comme lu
            </button>
        </div>
        
        <!-- Liste des notifications -->
        <div id="notifications-list" class="overflow-y-auto max-h-80">
            <!-- Les notifications seront chargées ici dynamiquement -->
            <div class="p-4 text-center text-gray-500">
                <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                <p>Chargement...</p>
            </div>
        </div>
        
        <!-- Pied de page -->
        <div class="p-2 border-t bg-gray-50 text-center">
            <a href="/notifications" class="text-sm text-blue-600 hover:text-blue-800">
                Voir toutes les notifications
            </a>
        </div>
    </div>
</div>

<!-- Script pour toggle dropdown -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const button = document.getElementById('notifications-button');
    const dropdown = document.getElementById('notifications-dropdown');
    
    if (button && dropdown) {
        button.addEventListener('click', function(e) {
            e.stopPropagation();
            dropdown.classList.toggle('hidden');
        });
        
        // Fermer si clic en dehors
        document.addEventListener('click', function(e) {
            if (!dropdown.contains(e.target) && !button.contains(e.target)) {
                dropdown.classList.add('hidden');
            }
        });
    }
});
</script>

<!-- Charger le script de gestion des notifications -->
<script src="{{ url_for('static', filename='js/notifications_realtime.js') }}"></script>