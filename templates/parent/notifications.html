{% extends "base.html" %}

{% block title %}Notifications - Parent{% endblock %}

{% block nav_links %}
<li class="nav-item">
    <a class="nav-link" href="{{ url_for('parent.dashboard') }}">
        <i class="bi bi-speedometer2"></i> Tableau de Bord
    </a>
</li>
<li class="nav-item">
    <a class="nav-link active" href="{{ url_for('parent.notifications') }}">
        <i class="bi bi-bell"></i> Notifications
    </a>
</li>
{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- En-tête -->
    <div class="row mb-4">
        <div class="col-md-8">
            <h1 class="display-5 fw-bold">
                <i class="bi bi-bell text-info"></i> Notifications
            </h1>
            <p class="text-muted">Centre de notifications pour le suivi de vos enfants</p>
        </div>
        <div class="col-md-4 text-end">
            <button class="btn btn-outline-primary" disabled>
                <i class="bi bi-check-all"></i> Tout Marquer Lu
            </button>
        </div>
    </div>
    
    <!-- Filtres -->
    <div class="card mb-4">
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-4">
                    <select class="form-select" disabled>
                        <option>Tous les enfants</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select class="form-select" disabled>
                        <option>Tous les types</option>
                        <option>Notes</option>
                        <option>Absences</option>
                        <option>Bulletins</option>
                        <option>Événements</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <select class="form-select" disabled>
                        <option>Toutes les périodes</option>
                        <option>Aujourd'hui</option>
                        <option>Cette semaine</option>
                        <option>Ce mois</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Liste des Notifications -->
    {% if notifications %}
    <div class="card">
        <div class="card-body p-0">
            <div class="list-group list-group-flush">
                {% for notif in notifications %}
                <div class="list-group-item list-group-item-action {% if not notif.lue %}bg-light{% endif %}">
                    <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">
                            {% if notif.type == 'note' %}
                            <i class="bi bi-file-earmark-text text-success"></i>
                            {% elif notif.type == 'absence' %}
                            <i class="bi bi-exclamation-triangle text-warning"></i>
                            {% elif notif.type == 'bulletin' %}
                            <i class="bi bi-folder-check text-primary"></i>
                            {% else %}
                            <i class="bi bi-info-circle text-info"></i>
                            {% endif %}
                            {{ notif.titre }}
                        </h6>
                        <small class="text-muted">{{ notif.date|format_date if notif.date else 'Récent' }}</small>
                    </div>
                    <p class="mb-1">{{ notif.message }}</p>
                    <small class="text-muted">
                        <i class="bi bi-person"></i> {{ notif.enfant_nom if notif.enfant_nom else 'Général' }}
                    </small>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% else %}
    <div class="card">
        <div class="card-body text-center py-5">
            <i class="bi bi-bell-slash display-1 text-muted"></i>
            <h5 class="mt-3 text-muted">Aucune notification</h5>
            <p class="text-muted">
                Vous serez notifié ici des événements importants concernant vos enfants:<br>
                nouvelles notes, absences, bulletins disponibles, etc.
            </p>
        </div>
    </div>
    {% endif %}
    
    <!-- Types de Notifications -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card bg-light">
                <div class="card-body">
                    <h6 class="fw-bold mb-3"><i class="bi bi-info-circle"></i> Types de Notifications</h6>
                    <div class="row">
                        <div class="col-md-3">
                            <p class="small mb-2">
                                <i class="bi bi-file-earmark-text text-success"></i> 
                                <strong>Notes</strong><br>
                                Nouvelles notes publiées
                            </p>
                        </div>
                        <div class="col-md-3">
                            <p class="small mb-2">
                                <i class="bi bi-exclamation-triangle text-warning"></i> 
                                <strong>Absences</strong><br>
                                Alertes d'absences et retards
                            </p>
                        </div>
                        <div class="col-md-3">
                            <p class="small mb-2">
                                <i class="bi bi-folder-check text-primary"></i> 
                                <strong>Bulletins</strong><br>
                                Nouveaux bulletins disponibles
                            </p>
                        </div>
                        <div class="col-md-3">
                            <p class="small mb-2">
                                <i class="bi bi-info-circle text-info"></i> 
                                <strong>Événements</strong><br>
                                Informations générales
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Message Informatif -->
    <div class="alert alert-info mt-4">
        <i class="bi bi-lightbulb"></i> 
        <strong>Astuce:</strong> Le système de notifications est en cours de développement. 
        Bientôt, vous recevrez des alertes par email pour tous les événements importants.
    </div>
</div>
{% endblock %}
